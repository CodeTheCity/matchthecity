<p>The source code for this project can be found on <a href="https://github.com/CodeTheCity/matchthecity">GitHub</a>.</p>

<h1>API Calls</h1>

<p>The following is a very draft list of API calls for accessing the MatchTheCity data.</p>
<p>Currently it is only JSON that is returned by these calls.</p>

<a id="region"><h2>Regions</h2></a>
<h3>Overview</h3>
<p>Regions represent the area of the country that the Venues are located in.</p>

<h3>Properties</h3>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td><td>unique identifier on the server for the Region</td>
    </tr>
    <tr>
      <td>name</td><td>name of the region</td>
    </tr>
    <tr>
      <td>url</td><td>The URL that points to the record on the server. This is automatically generated by the system.</td>
    </tr>
    <tr>
      <td>created_at</td><td>The data and time the Region was created. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
    <tr>
      <td>updated_at</td><td>The data and time the Region was updated. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
  </tbody>
</table>
<h3>GET /regions</h3>

<p>
  To get a list of the regions use: <%= link_to "http://#{request.host_with_port}/regions.json", regions_path(:format => 'json') %>
</p>

<h3>GET /regions/:id</h3>

<% sample_region = Region.first %>

<p>
  To get a Region object use: <%= link_to "http://#{request.host_with_port}/regions/#{sample_region.id}.json", region_path(sample_region, :format => 'json') %>
</p>


<a id="venue"><h2>Venues</h2></a>

<h3>Properties</h3>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td><td>unique identifier on the server for the Venue</td>
    </tr>
    <tr>
      <td>name</td><td>name of the venue</td>
    </tr>
    <tr>
      <td>address</td><td>address of the venue</td>
    </tr>
    <tr>
      <td>postcode</td><td>post code of the venue</td>
    </tr>
    <tr>
      <td>email</td><td>email address for the venue</td>
    </tr>
    <tr>
      <td>telephone</td><td>telephone number for the venue</td>
    </tr>
    <tr>
      <td>web</td><td>website for the venue</td>
    </tr>
    <tr>
      <td>region</td><td>Region data type of the venue. See <a href="#region">Region</a> for details.</td>
    </tr>
    <tr>
      <td>source_reference</td><td>original ID of the venue in its source data</td>
    </tr>
    <tr>
      <td>url</td><td>The URL that points to the record on the server. This is automatically generated by the system.</td>
    </tr>
    <tr>
      <td>created_at</td><td>The data and time the Venue was created. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
    <tr>
      <td>updated_at</td><td>The data and time the Venue was updated. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
  </tbody>
</table>


<h3>GET /venues</h3>

<p>
  To get a list of the venues use: <%= link_to "http://#{request.host_with_port}/venues.json", venues_path(:format => 'json') %>
<p>

<p>Since date format: yyyy-MM-dd'T'HH:mm:ss.SSSSSSSZ</p>

<p>
  To get a list of the venues updated since 6:50 am on 26th June 2014 use: <%= link_to "http://#{request.host_with_port}/venues.json?since=2014-06-26'T'06:50:00.0Z", venues_path(:format => 'json', :since => "2014-06-26'T'06:50:00.0Z") %>
<p>

<h3>GET /regions/:id/venues/</h3>
<p>
  To get a list of the Venues for a given Region use <%= link_to "http://#{request.host_with_port}/regions/#{sample_region.id}/venues.json", region_venues_path(sample_region, :format => 'json') %>
</p>


<h3>GET /venues/:id</h3>

<% sample_venue = Venue.first %>

<p>
  To get a Venue object use: <%= link_to "http://#{request.host_with_port}/venues/#{sample_venue.id}.json", venue_path(sample_venue, :format => 'json') %>
</p>

<a id="opportunity"><h2>Opportunities</h2></a>
<h3>GET /opportunities</h3>

<p>
  To get a list of the opportunities use: <%= link_to "http://#{request.host_with_port}/opportunities.json", opportunities_path(:format => 'json') %>
<p>


<h4>Request Parameters</h4>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Param</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>since</td><td>optional - since date format: yyyy-MM-dd'T'HH:mm:ss.SSSSSSSZ</td>
    </tr>
    <tr>
      <td>effort_rating</td><td>optional - effort rating 1 to 5 or 0 for unrated entries</td>
    </tr>
  </tbody>
 </table>

<p>
  To get a list of the opportunities updated since 16:25 am on 29th September 2014 use: <%= link_to "http://#{request.host_with_port}/opportunities.json?since=29-09-2014'T'16:25:00.0Z", opportunities_path(:format => 'json', :since => "29-09-2014'T'16:25:00.0Z") %>
<p>

<p>
  To get a list of the opportunities with an effort rating of 2 use: <%= link_to "http://#{request.host_with_port}/opportunities.json?effort_rating=2", opportunities_path(:format => 'json', :effort_rating => "2") %>
<p>
<h3>GET /opportunities/:id</h3>

<h3>Properties</h3>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td><td>unique identifier on the server for the Opportunity</td>
    </tr>
    <tr>
      <td>name</td><td>name of the opportunity</td>
    </tr>
    <tr>
      <td>category</td><td>category of the opportunity</td>
    </tr>
    <tr>
      <td>description</td><td>description of the opportunity</td>
    </tr>
    <tr>
      <td>venue</td><td>Venue data type for the opportunity. See <a href="#venue">Venue</a> for details.</td>
    </tr>
    <tr>
      <td>activity</td><td>Activity data type for the opportunity. See <a href="#activity">Activity</a> for details.</td>
    </tr>
    <tr>
      <td>sub_activity</td><td>Sub-activity data type for the opportunity. See <a href="#subactivity">SubActivity</a> for details.</td>
    </tr>
    <tr>
      <td>room</td><td>room in the venue that the opportunity takes place</td>
    </tr>
    <tr>
      <td>start_time</td><td>start time of the opportunity in format HH:mm</td>
    </tr>
    <tr>
      <td>end_time</td><td>end time of the opportunity in format HH:mm</td>
    </tr>
    <tr>
      <td>day_of_week</td><td>day of the week the opportunity takes place. [Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday]</td>
    </tr>
    <tr>
      <td>image_url</td><td>URL to an image that represents the opportunity</td>
    </tr>
    <tr>
      <td>effort_rating</td><td>Effort rating for the opportunity. This is a value of 1 to 5 with 1 being low effort and 5 being high effort.</td>
    </tr>
    <tr>
      <td>source_reference</td><td>original ID of the opportunity in its source data</td>
    </tr>
    <tr>
      <td>url</td><td>The URL that points to the record on the server. This is automatically generated by the system.</td>
    </tr>
    <tr>
      <td>created_at</td><td>The data and time the opportunity was created. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
    <tr>
      <td>updated_at</td><td>The data and time the opportunity was updated. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
  </tbody>
</table>

<% sample_opportunity = Opportunity.first %>

<p>
  To get an Opportunity object use: <%= link_to "http://#{request.host_with_port}/opportunities/#{sample_opportunity.id}.json", opportunity_path(sample_opportunity, :format => 'json') %>
</p>

<h3>GET /regions/:id/opportunities/</h3>
<p>
  To get a list of the Opportunities for a given Region use <%= link_to "http://#{request.host_with_port}/regions/#{sample_region.id}/opportunities.json", region_opportunities_path(sample_region, :format => 'json') %>
</p>

<h3>GET /venues/:id/opportunities/</h3>
<p>
  To get a list of the Opportunities for a given Venue use <%= link_to "http://#{request.host_with_port}/venues/#{sample_venue.id}/opportunities.json", venue_opportunities_path(sample_venue, :format => 'json') %>
</p>


<h3>POST /opportunities/:id/effort_ratings</h3>

<h4>Request Parameters</h4>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Param</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>effort_rating[rating]</td><td>required - The rating which is a value 1 to 5.</td>
    </tr>
  </tbody>
 </table>
<p>
  To create an Effort Rating entry for an opportunity post a rating value between 1 and 5.
  The overall Effort Rating for the Opportunity is an average of all the effort ratings raised for that Opportunity.
</p>



<a id="activity"><h2>Activities</h2></a>
<h3>Overview</h3>
<p>Activites represent a high level grouping of activities.</p>

<h3>Properties</h3>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td><td>unique identifier on the server for the Activity</td>
    </tr>
    <tr>
      <td>title</td><td>title of the activity</td>
    </tr>
    <tr>
      <td>category</td><td>category of the activity</td>
    </tr>
    <tr>
      <td>url</td><td>The URL that points to the record on the server. This is automatically generated by the system.</td>
    </tr>
    <tr>
      <td>created_at</td><td>The data and time the Activity was created. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
    <tr>
      <td>updated_at</td><td>The data and time the Activity was updated. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
  </tbody>
</table>
<h3>GET /activities</h3>

<p>
  To get a list of the activities use: <%= link_to "http://#{request.host_with_port}/activities.json", regions_path(:format => 'json') %>
</p>

<h3>GET /activities/:id</h3>

<% sample_activity = Activity.first %>

<p>
  To get an Activity object use: <%= link_to "http://#{request.host_with_port}/activities/#{sample_activity.id}.json", activity_path(sample_activity, :format => 'json') %>
</p>


<a id="subactivity"><h2>Sub Activities</h2></a>
<h3>Overview</h3>
<p>Sub Activites represent a more specific activity.</p>

<h3>Properties</h3>
<table class='table-striped table'>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td><td>unique identifier on the server for the SubActivity</td>
    </tr>
    <tr>
      <td>title</td><td>title of the sub-activity</td>
    </tr>
    <tr>
      <td>activity</td><td>Activity data type for the sub-activity. See <a href="#activity">Activity</a> for details.</td>
    </tr>
    <tr>
      <td>url</td><td>The URL that points to the record on the server. This is automatically generated by the system.</td>
    </tr>
    <tr>
      <td>created_at</td><td>The data and time the SubActivity was created. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
    <tr>
      <td>updated_at</td><td>The data and time the SubActivity was updated. This is automatically generated by the system in the format YYYY-MM-DDThh:mm:ssZ</td>
    </tr>
  </tbody>
</table>
<h3>GET /sub_activities</h3>

<p>
  To get a list of the sub activities use: <%= link_to "http://#{request.host_with_port}/sub_activities.json", sub_activities_path(:format => 'json') %>
</p>

<h3>GET /sub_activities/:id</h3>

<% sample_sub_activity = SubActivity.first %>

<p>
  To get an SubActivity object use: <%= link_to "http://#{request.host_with_port}/sub_activities/#{sample_sub_activity.id}.json", sub_activity_path(sample_sub_activity, :format => 'json') %>
</p>
